CREATE DATABASE AppointmentBot

CREATE TABLE Owners
(
    id bigint NOT NULL UNIQUE primary key
);

CREATE TABLE Visitor 
(
    id bigint NOT NULL UNIQUE primary key,
    name varchar NOT NULL,
    phone_number varchar NOT NULL UNIQUE
);

CREATE TABLE Business
(
   id bigint generated by default as identity primary key,
   owner_id bigint NOT NULL references Owners(id) ON DELETE CASCADE,
   name varchar NOT NULL UNIQUE,
   photo_id varchar NOT NULL UNIQUE,
   description varchar NOT NULL,
   time_of_work varchar NOT NULL
);

CREATE TABLE Employees
(
   id bigint NOT NULL UNIQUE primary key,
   business_id bigint NOT NULL references Business(id) ON DELETE CASCADE,
   name varchar NOT NULL,
   lastname varchar NOT NULL,
   photo_id varchar NOT NULL UNIQUE,
   phone_number varchar NOT NULL UNIQUE,
   time_of_one_session varchar NOT NULL,
   description varchar NOT NULL
);

CREATE TABLE Records
(
   business_id bigint NOT NULL references Business(id) ON DELETE CASCADE,
   visitor_id bigint NOT NULL references Visitor(id) ON DELETE CASCADE,
   employee_id bigint NOT NULL references Employees(id) ON DELETE CASCADE,
   start_time timestamp NOT NULL
);

CREATE TABLE Estimates
(
   estimate bigint NOT NULL,
   business_id bigint NOT NULL references Business(id) ON DELETE CASCADE,
   visitor_id bigint NOT NULL references Visitor(id) ON DELETE CASCADE
);